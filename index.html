<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A ONE MUSIC - English Version</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>

    <style>
        :root {
            --primary-color: #007bff;
            --glass: rgba(255, 255, 255, 0.1);
            --border: rgba(255, 255, 255, 0.2);
            --success: #28a745;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f0f12 0%, #1a1a2e 100%);
            color: white;
            margin: 0;
            padding: 20px;
            text-align: center;
            min-height: 100vh;
        }

        /* Upload Card Styling */
        .upload-card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid var(--border);
            padding: 25px;
            border-radius: 20px;
            max-width: 450px;
            margin: 20px auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .input-group { margin-bottom: 15px; text-align: left; }
        .input-group label { display: block; margin-bottom: 5px; font-size: 0.9em; color: #bbb; }

        input[type="text"] {
            width: 100%; padding: 12px; border-radius: 8px; border: none;
            background: rgba(255,255,255,0.05); color: white; box-sizing: border-box;
            outline: none;
        }

        .file-btn {
            background: rgba(255,255,255,0.1); padding: 12px; border-radius: 8px;
            cursor: pointer; display: block; margin-top: 5px; border: 1px dashed var(--border);
            transition: 0.3s; text-align: center;
        }
        .file-btn:hover { background: rgba(255,255,255,0.2); }

        .submit-btn {
            background: var(--primary-color); color: white; border: none;
            padding: 15px; border-radius: 50px; font-weight: bold;
            cursor: pointer; width: 100%; margin-top: 15px; transition: 0.3s;
        }
        .submit-btn:hover { background: #0056b3; transform: scale(1.02); }

        /* Animation Area */
        #upload-status-area { display: none; margin-top: 20px; }
        .loader {
            border: 4px solid #f3f3f3; border-top: 4px solid var(--primary-color);
            border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .progress-container { width: 100%; background: #222; border-radius: 10px; height: 8px; margin-top: 10px; }
        .progress-bar { width: 0%; height: 100%; background: var(--primary-color); transition: width 0.3s; }

        /* Main Display */
        .main-container { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 30px; }
        .list-box, .player-box { 
            background: var(--glass); padding: 20px; border-radius: 15px; 
            width: 350px; border: 1px solid var(--border); 
        }
        .song-item { 
            display: flex; align-items: center; gap: 15px; padding: 12px; 
            border-bottom: 1px solid var(--border); cursor: pointer; transition: 0.2s;
        }
        .song-item:hover { background: rgba(255,255,255,0.1); }
        .song-item img { width: 45px; height: 45px; border-radius: 8px; object-fit: cover; }
    </style>
</head>
<body>

    <h1 style="letter-spacing: 2px;">A ONE MUSIC âœ“</h1>

    <div class="upload-card">
        <h3><i class="fas fa-cloud-upload-alt"></i> UPLOAD NEW TRACK</h3>
        
        <div class="input-group">
            <label>Song Title</label>
            <input type="text" id="song-name" placeholder="Enter song name here...">
        </div>

        <div class="input-group">
            <label>Audio File (MP3)</label>
            <div class="file-btn" onclick="openWidget('audio')"><i class="fas fa-file-audio"></i> Choose Audio</div>
            <span id="audio-name" style="font-size: 0.75em; color: var(--success); display: block; margin-top: 5px;"></span>
        </div>

        <div class="input-group">
            <label>Cover Art (Logo)</label>
            <div class="file-btn" onclick="openWidget('image')"><i class="fas fa-image"></i> Choose Logo</div>
            <span id="image-name" style="font-size: 0.75em; color: var(--success); display: block; margin-top: 5px;"></span>
        </div>

        <button class="submit-btn" id="final-submit" onclick="addToSite()">ADD TO PLAYLIST</button>

        <div id="upload-status-area">
            <div class="loader"></div>
            <div id="status-text" style="font-size: 0.9em;">Processing & Saving...</div>
            <div class="progress-container"><div class="progress-bar" id="p-bar"></div></div>
        </div>
    </div>

    <div class="main-container">
        <div class="list-box">
            <h3>Track List ðŸ’¿</h3>
            <div id="track-list"></div>
        </div>
        <div class="player-box">
            <img id="p-img" src="songlogo.jpg" style="width: 100%; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
            <h4 id="p-title" style="margin-top: 15px; color: var(--primary-color);">Select a song to play</h4>
            <audio id="main-audio" controls style="width: 100%; margin-top: 10px;"></audio>
        </div>
    </div>

    <script>
        let songs = [];
        let tempAudio = "";
        let tempImage = "songlogo.jpg";
        
        // Your New Cloudinary Credentials
        const cloudName = "dcsczlahu";
        const apiKey = "213379191614618";
        const uploadPreset = "ml_default";

        // Load data from LocalStorage on page load
        window.onload = () => {
            const savedData = localStorage.getItem('my_music_list');
            if(savedData) {
                songs = JSON.parse(savedData);
                updateList();
            }
        };

        function openWidget(type) {
            cloudinary.openUploadWidget({
                cloudName: cloudName,
                uploadPreset: uploadPreset,
                sources: ['local'],
                multiple: false,
                resourceType: type === 'audio' ? 'video' : 'image'
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    if (type === 'audio') {
                        tempAudio = result.info.secure_url;
                        document.getElementById('audio-name').innerText = "âœ… Audio file linked successfully";
                    } else {
                        tempImage = result.info.secure_url;
                        document.getElementById('image-name').innerText = "âœ… Image file linked successfully";
                    }
                }
            });
        }

        function addToSite() {
            const name = document.getElementById('song-name').value;
            if(!name || !tempAudio) {
                alert("Please provide both Song Title and Audio file!");
                return;
            }

            // Show Animation
            const statusArea = document.getElementById('upload-status-area');
            const pBar = document.getElementById('p-bar');
            statusArea.style.display = "block";
            document.getElementById('final-submit').disabled = true;

            let width = 0;
            let interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    songs.push({ title: name, audio: tempAudio, img: tempImage });
                    
                    // Save to LocalStorage
                    localStorage.setItem('my_music_list', JSON.stringify(songs));
                    
                    updateList();
                    statusArea.style.display = "none";
                    document.getElementById('final-submit').disabled = false;
                    resetForm();
                    alert("Song added successfully!");
                } else {
                    width += 10;
                    pBar.style.width = width + "%";
                }
            }, 100);
        }

        function updateList() {
            const list = document.getElementById('track-list');
            list.innerHTML = songs.length === 0 ? "<p style='color:#666'>No tracks available</p>" : "";
            songs.forEach((s, i) => {
                list.innerHTML += `
                    <div class="song-item" onclick="playSong(${i})">
                        <img src="${s.img}">
                        <div style="text-align:left">
                            <strong>${s.title}</strong><br>
                            <small style="color:#aaa">Click to play</small>
                        </div>
                    </div>`;
            });
        }

        function playSong(i) {
            const s = songs[i];
            document.getElementById('p-title').innerText = s.title;
            document.getElementById('p-img').src = s.img;
            const a = document.getElementById('main-audio');
            a.src = s.audio;
            a.play();
        }

        function resetForm() {
            document.getElementById('song-name').value = "";
            document.getElementById('audio-name').innerText = "";
            document.getElementById('image-name').innerText = "";
            tempAudio = "";
            tempImage = "songlogo.jpg";
        }
    </script>
</body>
</html>
